<script>
    let currentStep = 0;
    const totalSteps = 4;
    const photos = [
        'https://via.placeholder.com/400x300.png?text=Akuu+Moment+1',
        'https://via.placeholder.com/400x300.png?text=Akuu+Moment+2',
        'https://via.placeholder.com/400x300.png?text=Akuu+Moment+3'
    ];

    function setupGallery(galleryId, photoIndex) {
        const gallery = document.getElementById(galleryId);
        const img = document.createElement('img');
        img.src = photos[photoIndex];
        img.alt = 'Akuu Memory';
        img.style.transform = 'rotateY(0deg) translateZ(150px)';
        gallery.appendChild(img);
        let angle = 0;
        setInterval(() => {
            angle = (angle + 1) % 360;
            img.style.transform = `rotateY(${angle}deg) translateZ(150px)`;
        }, 50);
    }

    function nextStep() {
        document.getElementById(`step-${currentStep}`).classList.add('hidden');
        currentStep++;
        if (currentStep <= totalSteps) {
            document.getElementById(`step-${currentStep}`).classList.remove('hidden');
            if (currentStep === 1) setupGallery('gallery', 0);
            if (currentStep === 2) setupGallery('gallery2', 1);
            if (currentStep === 3) setupGallery('gallery3', 2);
        }
    }

    function showFinal() {
        const container = document.getElementById('container');
        container.innerHTML = `
            <h1 style="font-size: 3.5em; color: #d81b60;">I Love You, Akuu!</h1>
            <p style="font-size: 1.5em;">Happy Birthday, meri jaan! Tum hamesha meri wajah se muskurao, aur hum sath mein hazaar saal jiyo! ğŸ‰</p>
            <div style="font-size: 3em; margin: 20px;">ğŸ‚â¤ï¸ğŸˆ</div>
        `;
        createConfetti();
        createBalloons();
    }

    function createConfetti() {
        for (let i = 0; i < 150; i++) {
            const confetti = document.createElement('div');
            confetti.style.position = 'absolute';
            confetti.style.width = '10px';
            confetti.style.height = '10px';
            confetti.style.background = `hsl(${Math.random() * 360}, 100%, 50%)`;
            confetti.style.left = `${Math.random() * 100}vw`;
            confetti.style.top = `${Math.random() * 100}vh`;
            confetti.style.opacity = '0.8';
            confetti.style.animation = `fall ${Math.random() * 2 + 1}s linear`;
            document.body.appendChild(confetti);
            setTimeout(() => confetti.remove(), 4000);
        }
    }

    function createBalloons() {
        for (let i = 0; i < 10; i++) {
            const balloon = document.createElement('div');
            balloon.className = 'balloon';
            balloon.style.left = `${Math.random() * 90 + 5}%`;
            balloon.style.animationDelay = `${Math.random() * 2}s`;
            document.body.appendChild(balloon);
            setTimeout(() => balloon.remove(), 10000);
        }
    }

    // CSS for confetti and balloons
    const style = document.createElement('style');
    style.innerHTML = `
        @keyframes fall {
            0% { transform: translateY(-100vh) rotate(0deg); }
            100% { transform: translateY(100vh) rotate(720deg); }
        }
    `;
    document.head.appendChild(style);

    // Play background music
    const music = document.getElementById('bgMusic');
    music.volume = 0.3;
    music.play();

    // Initialize first gallery
    window.onload = () => {
        document.getElementById('step-0').classList.remove('hidden');
    };
</script>
